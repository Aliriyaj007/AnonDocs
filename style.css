/* ==== Base & Theme ==== */
:root{
  --bg: #0f1115;
  --panel: #161922;
  --panel-2:#1d2130;
  --text:#e8ebf1;
  --muted:#9aa3b2;
  --accent:#4f8cff;
  --accent-2:#7aa2ff;
  --border:#242a38;
  --page:#ffffff;
  --page-text:#14151a;
  --shadow: 0 10px 40px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text); font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}

/* ==== App Bar ==== */
.appbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  padding:.5rem .75rem; gap:.5rem; background:var(--panel); border-bottom:1px solid var(--border);
}
.appbar .left{display:flex; align-items:center; gap:.5rem; min-width:0}
.appbar .right{display:flex; align-items:center; gap:.5rem}
.brand{font-weight:700; letter-spacing:.2px}
.icon-btn{background:transparent; border:1px solid var(--border); color:var(--text); padding:.4rem .6rem; border-radius:8px; cursor:pointer}
.icon-btn:hover{background:var(--panel-2)}
.doc-title{
  background:transparent; border:1px solid transparent; color:var(--text);
  padding:.25rem .5rem; border-radius:6px; min-width:160px; width:clamp(120px, 22vw, 280px);
}
.doc-title:focus{outline:none; border-color:var(--accent); background:var(--panel-2)}
.menubar{display:flex; gap:.25rem; flex-wrap:wrap}
.menu-btn{background:transparent; border:none; color:var(--muted); padding:.35rem .5rem; border-radius:6px; cursor:pointer}
.menu-btn:hover{background:var(--panel-2); color:var(--text)}
.pill, .primary, .small{
  border:none; border-radius:999px; padding:.4rem .8rem; cursor:pointer;
}
.pill{background:var(--panel-2); color:var(--text)}
.pill:hover{background:#22283a}
.primary{background:var(--accent); color:white; font-weight:600}
.primary:hover{background:var(--accent-2)}
.badge{font-size:.8rem; color:var(--muted); border:1px solid var(--border); padding:.2rem .5rem; border-radius:999px}

/* Menus */
.menu{position:absolute; top:54px; background:var(--panel); border:1px solid var(--border); border-radius:10px;
  padding:.4rem; box-shadow:var(--shadow); display:none; flex-direction:column; min-width:220px}
.menu button,.menu .upload{background:transparent; color:var(--text); border:none; text-align:left; padding:.5rem .6rem; border-radius:8px; cursor:pointer}
.menu button:hover,.menu .upload:hover{background:var(--panel-2)}
.menu hr{border:0; border-top:1px solid var(--border); margin:.4rem .2rem}
.menu .upload{position:relative}
.menu .upload input{position:absolute; inset:0; opacity:0; cursor:pointer}

/* ==== Toolbar ==== */
.toolbar{
  display:flex; align-items:center; gap:.4rem; padding:.4rem .6rem; overflow:auto; background:var(--panel);
  border-bottom:1px solid var(--border);
}
.toolbar select,.toolbar input[type=color]{background:var(--panel-2); color:var(--text); border:1px solid var(--border);
  padding:.35rem .5rem; border-radius:8px}
.toolbar .icon-btn{padding:.35rem .55rem}
.sep{width:1px; height:24px; background:var(--border); margin:0 .25rem}

/* ==== Layout ==== */
.layout{display:grid; grid-template-columns:280px 1fr; min-height:calc(100vh - 100px)}
.sidebar{
  background:var(--panel); border-right:1px solid var(--border); overflow:auto; padding:.6rem;
}
.side-head{display:flex; justify-content:space-between; align-items:center; padding:.25rem .25rem .5rem}
.small{background:var(--panel-2); color:var(--text)}
.small:hover{background:#22283a}
.doc-list{display:flex; flex-direction:column; gap:.25rem}
.doc-item{padding:.5rem .6rem; border:1px solid var(--border); border-radius:8px; cursor:pointer}
.doc-item:hover{background:var(--panel-2)}
.doc-item.active{outline:2px solid var(--accent)}

.editor-wrap{display:flex; flex-direction:column; align-items:center; overflow:auto}
.page{
  width: 794px; /* A4 @ 96dpi ~ 8.27in */
  min-height: 1123px;
  background:var(--page); color:var(--page-text);
  margin: 20px auto; padding: 96px 84px; /* margins */
  border-radius:12px; box-shadow: var(--shadow); transform-origin: top center;
}
.editor{
  min-height: 900px; outline:none; font-size:16px; line-height:1.5;
}
.editor:empty:before{content:attr(placeholder); color:#8b92a6}
.statusbar{
  width:100%; max-width: 900px; color:var(--muted); padding:.5rem; display:flex; justify-content:space-between;
}

/* Page shadow toggle */
.page.noshadow{box-shadow:none}

/* ==== Modals & Toasts ==== */
.modal.hidden{display:none}
.modal{position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; z-index:100}
.modal-card{background:var(--panel); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow);
  padding:1rem; width:min(520px, 92vw); color:var(--text)}
.modal-card h3{margin-top:0}
.modal-card label{display:block; margin:.5rem 0}
.modal-card input{width:100%; padding:.55rem .7rem; border-radius:8px; border:1px solid var(--border); background:var(--panel-2); color:var(--text)}
.modal-card .row{display:flex; gap:.5rem; justify-content:flex-end; margin-top:.75rem}
.modal-card button{border:none; border-radius:8px; padding:.45rem .8rem; cursor:pointer; background:var(--panel-2); color:var(--text)}
.modal-card button:hover{background:#22283a}

#toasts{position:fixed; bottom:16px; right:16px; display:flex; flex-direction:column; gap:8px; z-index:101}
.toast{background:var(--panel); border:1px solid var(--border); color:var(--text); padding:.6rem .8rem; border-radius:10px; box-shadow:var(--shadow); animation:fade .25s ease, fadeOut .25s ease 2.2s forwards}
@keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
@keyframes fadeOut{to{opacity:0; transform:translateY(6px)}}

/* ==== Responsive ==== */
@media (max-width: 1100px){
  .page{transform: scale(.9)}
  .statusbar{max-width: 820px}
}
@media (max-width: 900px){
  .layout{grid-template-columns: 0 1fr}
  .sidebar{position:fixed; z-index:40; top:100px; bottom:0; width:280px; transform:translateX(-100%);
    transition: transform .25s ease}
  .sidebar.open{transform:translateX(0)}
  .page{width: 90vw; padding: 60px 48px}
}
@media (max-width: 560px){
  .appbar .menubar{display:none}
  .doc-title{width: 36vw}
  .page{padding: 44px 22px; transform: scale(1)}
  .toolbar{gap:.3rem}
  .toolbar select{max-width:120px}
}
