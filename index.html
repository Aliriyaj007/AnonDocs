<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AnonDocs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <!-- AES for password-protected sharing (pure JS, CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <!-- ===== App Bar ===== -->
  <header class="appbar">
    <div class="left">
      <button class="icon-btn" id="menuToggle" title="Docs (toggle)">‚ò∞</button>
      <div class="brand">AnonDocs</div>
      <input id="docTitle" class="doc-title" placeholder="Untitled document" />
      <nav class="menubar">
        <button class="menu-btn" data-menu="fileMenu">File ‚ñæ</button>
        <button class="menu-btn" data-menu="editMenu">Edit ‚ñæ</button>
        <button class="menu-btn" data-menu="viewMenu">View ‚ñæ</button>
        <button class="menu-btn" data-menu="insertMenu">Insert ‚ñæ</button>
        <button class="menu-btn" data-menu="formatMenu">Format ‚ñæ</button>
      </nav>
    </div>
    <div class="right">
      <span id="autosaveBadge" class="badge">Saved</span>
      <button id="themeToggle" class="pill">‚òÄÔ∏è / üåô</button>
      <button id="shareBtn" class="primary">Share</button>
    </div>

    <!-- Menus -->
    <div id="fileMenu" class="menu">
      <button onclick="newDocument()">New</button>
      <button onclick="saveDocument()">Save</button>
      <hr />
      <button onclick="exportHTML()">Download as HTML</button>
      <button onclick="exportTXT()">Download as TXT</button>
      <hr />
      <button onclick="exportBackup()">Export All (JSON)</button>
      <label class="upload">Import Backup (JSON)
        <input type="file" accept="application/json" onchange="importBackup(event)" />
      </label>
      <hr />
      <button onclick="printDocument()">Print</button>
    </div>

    <div id="editMenu" class="menu">
      <button onclick="cmd('undo')">Undo</button>
      <button onclick="cmd('redo')">Redo</button>
      <hr />
      <button onclick="openFind()">Find & Replace</button>
      <button onclick="cmd('selectAll')">Select All</button>
      <button onclick="clearFormatting()">Clear Formatting</button>
    </div>

    <div id="viewMenu" class="menu">
      <button onclick="setZoom(0.9)">Zoom -</button>
      <button onclick="setZoom(1.0)">Zoom 100%</button>
      <button onclick="setZoom(1.1)">Zoom +</button>
      <hr />
      <button onclick="togglePageShade()">Toggle Page Shadow</button>
    </div>

    <div id="insertMenu" class="menu">
      <button onclick="insertLink()">Link</button>
      <label class="upload">Image
        <input type="file" accept="image/*" onchange="insertImage(event)" />
      </label>
      <button onclick="insertDate()">Date/Time</button>
      <button onclick="insertDivider()">Divider</button>
    </div>

    <div id="formatMenu" class="menu">
      <button onclick="cmd('bold')"><b>Bold</b></button>
      <button onclick="cmd('italic')"><i>Italic</i></button>
      <button onclick="cmd('underline')"><u>Underline</u></button>
      <button onclick="cmd('strikeThrough')"><s>Strike</s></button>
      <hr />
      <button onclick="block('P')">Normal text</button>
      <button onclick="block('H1')">Heading 1</button>
      <button onclick="block('H2')">Heading 2</button>
      <button onclick="block('H3')">Heading 3</button>
      <hr />
      <button onclick="cmd('insertUnorderedList')">‚Ä¢ Bulleted list</button>
      <button onclick="cmd('insertOrderedList')">1. Numbered list</button>
      <button onclick="cmd('outdent')">Outdent</button>
      <button onclick="cmd('indent')">Indent</button>
      <hr />
      <button onclick="cmd('justifyLeft')">Align Left</button>
      <button onclick="cmd('justifyCenter')">Align Center</button>
      <button onclick="cmd('justifyRight')">Align Right</button>
      <button onclick="cmd('justifyFull')">Justify</button>
      <hr />
      <button onclick="setLineHeight(1.15)">Line spacing 1.15</button>
      <button onclick="setLineHeight(1.5)">Line spacing 1.5</button>
      <button onclick="setLineHeight(2)">Line spacing 2.0</button>
    </div>
  </header>

  <!-- ===== Formatting Toolbar ===== -->
  <div class="toolbar">
    <button class="icon-btn" title="Undo" onclick="cmd('undo')">‚Ü∂</button>
    <button class="icon-btn" title="Redo" onclick="cmd('redo')">‚Ü∑</button>
    <span class="sep"></span>

    <select id="styleBlock" onchange="block(this.value)">
      <option value="P">Normal</option>
      <option value="H1">Heading 1</option>
      <option value="H2">Heading 2</option>
      <option value="H3">Heading 3</option>
    </select>

    <select id="fontFamily" onchange="cmd('fontName', this.value)">
      <option>Arial</option>
      <option>Georgia</option>
      <option>Times New Roman</option>
      <option>Courier New</option>
      <option>Verdana</option>
      <option>Inter</option>
    </select>

    <select id="fontSize" onchange="cmd('fontSize', this.value)">
      <option value="2">Small</option>
      <option value="3" selected>Normal</option>
      <option value="4">Large</option>
      <option value="5">X-Large</option>
      <option value="6">XX-Large</option>
      <option value="7">Huge</option>
    </select>

    <button class="icon-btn" title="Bold" onclick="cmd('bold')"><b>B</b></button>
    <button class="icon-btn" title="Italic" onclick="cmd('italic')"><i>I</i></button>
    <button class="icon-btn" title="Underline" onclick="cmd('underline')"><u>U</u></button>
    <button class="icon-btn" title="Strike" onclick="cmd('strikeThrough')"><s>S</s></button>

    <input type="color" title="Text color" onchange="cmd('foreColor', this.value)" />
    <input type="color" title="Highlight" onchange="cmd('hiliteColor', this.value)" />

    <button class="icon-btn" title="Left" onclick="cmd('justifyLeft')">‚Ü§</button>
    <button class="icon-btn" title="Center" onclick="cmd('justifyCenter')">‚Üî</button>
    <button class="icon-btn" title="Right" onclick="cmd('justifyRight')">‚Ü¶</button>
    <button class="icon-btn" title="Justify" onclick="cmd('justifyFull')">‚ò∞</button>

    <button class="icon-btn" title="Bulleted list" onclick="cmd('insertUnorderedList')">‚Ä¢</button>
    <button class="icon-btn" title="Numbered list" onclick="cmd('insertOrderedList')">1.</button>
    <button class="icon-btn" title="Outdent" onclick="cmd('outdent')">¬´</button>
    <button class="icon-btn" title="Indent" onclick="cmd('indent')">¬ª</button>

    <button class="icon-btn" title="Link" onclick="insertLink()">üîó</button>
    <label class="icon-btn upload" title="Image">üñº
      <input type="file" accept="image/*" onchange="insertImage(event)" />
    </label>
    <button class="icon-btn" title="Clear" onclick="clearFormatting()">‚å´</button>

    <span class="sep"></span>

    <button class="pill" onclick="saveDocument()">Save</button>
  </div>

  <!-- ===== Main Area ===== -->
  <div class="layout">
    <!-- Sidebar / Docs -->
    <aside id="sidebar" class="sidebar">
      <div class="side-head">
        <div>My documents</div>
        <button class="small" onclick="newDocument()">+ New</button>
      </div>
      <div id="docList" class="doc-list"></div>
    </aside>

    <!-- Page -->
    <section class="editor-wrap">
      <div id="page" class="page">
        <div id="editor" class="editor" contenteditable="true" spellcheck="true"
             placeholder="Start typing‚Ä¶"></div>
      </div>
      <footer class="statusbar">
        <span id="stats">0 words ¬∑ 0 chars ¬∑ 0 min</span>
        <span id="zoomLabel">100%</span>
      </footer>
    </section>
  </div>

  <!-- ===== Find & Replace Modal ===== -->
  <div id="findModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <h3>Find & Replace</h3>
      <label>Find <input id="findInput" /></label>
      <label>Replace <input id="replaceInput" /></label>
      <div class="row">
        <button onclick="findNext()">Find Next</button>
        <button onclick="replaceOne()">Replace</button>
        <button onclick="replaceAll()">Replace All</button>
        <button class="ghost" onclick="closeFind()">Close</button>
      </div>
    </div>
  </div>

  <!-- ===== Toasts ===== -->
  <div id="toasts"></div>
</body>
</html>
